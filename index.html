<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ðŸ’ª Dating Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #0a0a0a;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.05) 0%, transparent 50%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        .main-container {
            max-width: 450px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 80px;
        }

        .header {
            text-align: center;
            color: #f0f0f0;
            margin-bottom: 30px;
            padding-top: 20px;
            position: relative;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 300;
            letter-spacing: 4px;
            text-transform: uppercase;
            background: linear-gradient(135deg, #c0c0c0, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .sync-status {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 5px 10px;
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: #888;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .sync-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #00ff88;
        }

        .sync-indicator.syncing {
            background: #ffaa00;
            animation: pulse 1s infinite;
        }

        .sync-indicator.offline {
            background: #ff3366;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        /* Section Selector */
        .section-selector {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 8px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .section-btn {
            padding: 12px;
            background: transparent;
            color: #888;
            border: 1px solid transparent;
            border-radius: 10px;
            font-weight: 300;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .section-btn.active {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        }

        .section-btn:hover {
            background: rgba(255, 255, 255, 0.03);
            color: #fff;
        }

        .section-btn svg {
            width: 16px;
            height: 16px;
            opacity: 0.8;
        }

        /* Auth Styles */
        .auth-container {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px 30px;
            margin-bottom: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .auth-button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
        }

        .auth-button:active {
            transform: scale(0.98);
        }

        .google-signin {
            background: rgba(255, 255, 255, 0.05);
            color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .google-signin:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .anonymous-signin {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            color: #e0e0e0;
        }

        /* Card Styles */
        .card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .card h3 {
            color: #f0f0f0;
            font-weight: 300;
            letter-spacing: 1px;
            font-size: 16px;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 300;
            color: #aaa;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            color: #e0e0e0;
            transition: all 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* Button Styles */
        .btn {
            padding: 12px 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 400;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            color: #fff;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
        }

        .btn-success {
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            border-color: rgba(0, 255, 136, 0.3);
        }

        .btn-success:hover {
            background: rgba(0, 255, 136, 0.15);
        }

        .btn-danger {
            background: rgba(255, 51, 102, 0.1);
            color: #ff3366;
            border-color: rgba(255, 51, 102, 0.3);
        }

        .btn-danger:hover {
            background: rgba(255, 51, 102, 0.15);
        }

        .btn-warning {
            background: rgba(255, 170, 0, 0.1);
            color: #ffaa00;
            border-color: rgba(255, 170, 0, 0.3);
        }

        .btn-warning:hover {
            background: rgba(255, 170, 0, 0.15);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-full {
            width: 100%;
        }

        /* Rating Visualization */
        .rating-display {
            display: inline-flex;
            gap: 3px;
        }

        .rating-dash {
            width: 25px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .rating-dash.low { 
            background: linear-gradient(90deg, #ff3366 0%, rgba(255, 51, 102, 0.3) 100%);
        }
        .rating-dash.medium { 
            background: linear-gradient(90deg, #ffaa00 0%, #ffaa00 50%, rgba(255, 170, 0, 0.3) 100%);
        }
        .rating-dash.high { 
            background: #00ff88;
            box-shadow: 0 0 5px rgba(0, 255, 136, 0.5);
        }
        .rating-dash.inactive { 
            background: rgba(255, 255, 255, 0.05);
        }

        /* Women Management Styles */
        .filter-bar {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            color: #e0e0e0;
            margin-bottom: 10px;
        }

        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .search-input::placeholder {
            color: #666;
        }

        .filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-chip {
            padding: 6px 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.03);
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-chip:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        .filter-chip.active {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.3);
        }

        .woman-grid {
            display: grid;
            gap: 15px;
        }

        .woman-card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .woman-card:hover {
            transform: translateY(-3px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .woman-score {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            color: #fff;
            padding: 5px 10px;
            border-radius: 8px;
            font-weight: 300;
            font-size: 14px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .woman-status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        .status-current { 
            background: rgba(0, 255, 136, 0.15);
            color: #00ff88;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        .status-in-process { 
            background: rgba(33, 150, 243, 0.15);
            color: #64b5f6;
            border: 1px solid rgba(33, 150, 243, 0.3);
        }
        .status-passive { 
            background: rgba(255, 170, 0, 0.15);
            color: #ffaa00;
            border: 1px solid rgba(255, 170, 0, 0.3);
        }
        .status-archived { 
            background: rgba(158, 158, 158, 0.15);
            color: #9e9e9e;
            border: 1px solid rgba(158, 158, 158, 0.3);
        }

        /* Date Scheduling Styles */
        .date-list {
            display: grid;
            gap: 15px;
        }

        .date-card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            border-left: 2px solid rgba(255, 255, 255, 0.3);
        }

        .date-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .date-time {
            font-weight: 300;
            color: #fff;
            font-size: 14px;
        }

        .date-woman {
            background: rgba(255, 255, 255, 0.05);
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            color: #aaa;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            background: rgba(15, 15, 15, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px 20px;
            max-width: 450px;
            margin: 20px auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 300;
            color: #fff;
            letter-spacing: 1px;
        }

        .close-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 5px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: #fff;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Approach specific styles */
        .effort-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .effort-btn {
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.03);
            color: #888;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .effort-btn.selected {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.3);
        }

        .approach-item {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .approach-item:hover {
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateX(3px);
        }

        .approach-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .approach-date {
            font-weight: 300;
            color: #fff;
        }

        .photo-upload-area {
            border: 1px dashed rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
        }

        .photo-preview-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .photo-preview-item {
            position: relative;
            display: inline-block;
        }

        .photo-preview {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .photo-delete-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 51, 102, 0.9);
            color: white;
            border: 1px solid rgba(0, 0, 0, 0.5);
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            transition: all 0.2s;
        }

        .photo-delete-btn:hover {
            background: #ff3366;
            transform: scale(1.1);
        }

        .rating-section {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .rating-section:last-of-type {
            border-bottom: none;
        }

        .rating-section h3 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .rating-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .rating-item label {
            flex: 1;
            font-size: 13px;
            color: #aaa;
        }

        .rating-buttons {
            display: flex;
            gap: 5px;
        }

        .rating-btn {
            padding: 5px 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.03);
            color: #666;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s;
            text-transform: uppercase;
        }

        .rating-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #aaa;
        }

        .rating-btn.selected {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.3);
        }

        .loading {
            text-align: center;
            color: #666;
            padding: 20px;
        }

        .user-info {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-top: 5px;
            letter-spacing: 0.5px;
        }

        .sign-out {
            background: rgba(255, 51, 102, 0.1);
            color: #ff3366;
            padding: 8px 15px;
            border: 1px solid rgba(255, 51, 102, 0.3);
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
        }

        .sign-out:hover {
            background: rgba(255, 51, 102, 0.2);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 10px;
            opacity: 0.3;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, rgba(0, 255, 136, 0.8), rgba(0, 255, 136, 0.3));
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-fill::after {
            content: attr(data-percentage);
            position: absolute;
            right: -30px;
            top: 6px;
            font-size: 10px;
            color: #666;
        }

        .edit-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .woman-link-select {
            margin-top: 10px;
        }

        select {
            background: rgba(255, 255, 255, 0.03);
            color: #e0e0e0;
        }

        select option {
            background: #1a1a1a;
            color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="sync-status">
        <span class="sync-indicator" id="syncIndicator"></span>
        <span id="syncText">Synced</span>
    </div>

    <div class="main-container">
        <div class="header">
            <h1>TRACKER</h1>
            <div class="user-info" id="userInfo"></div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="loading">
            <p>Initializing...</p>
        </div>

        <!-- Auth Screen -->
        <div id="authScreen" class="auth-container" style="display: none;">
            <h2 style="margin-bottom: 20px; color: #667eea;">Welcome!</h2>
            <p style="margin-bottom: 20px; color: #666;">Sign in to sync your data across devices</p>
            
            <button class="auth-button google-signin" onclick="signInWithGoogle()">
                <svg width="20" height="20" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Sign in with Google
            </button>
            
            <button class="auth-button anonymous-signin" onclick="signInAnonymously()">
                Sign in Anonymously
            </button>
            
            <p style="margin-top: 15px; font-size: 12px; color: #999;">
                Anonymous data syncs to this device only
            </p>
        </div>

        <!-- Main App Content -->
        <div id="appContent" style="display: none;">
            <!-- Home Screen -->
            <div id="homeScreen" class="section active">
                <!-- Logo -->
                <div style="text-align: center; margin: 40px 0;">
                    <svg width="120" height="120" viewBox="0 0 200 200" style="filter: drop-shadow(0 10px 30px rgba(0,0,0,0.5));">
                        <!-- Jaguar Crown Logo -->
                        <defs>
                            <linearGradient id="goldAccent" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFD700;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FFA500;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="silverSheen" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#C0C0C0;stop-opacity:0.3" />
                                <stop offset="100%" style="stop-color:#808080;stop-opacity:0.1" />
                            </linearGradient>
                        </defs>
                        
                        <!-- Jaguar Head -->
                        <path d="M100 40 C70 40, 45 60, 45 90 L45 110 C45 140, 70 160, 100 160 C130 160, 155 140, 155 110 L155 90 C155 60, 130 40, 100 40 Z" fill="#0a0a0a" stroke="url(#silverSheen)" stroke-width="2"/>
                        
                        <!-- Eyes -->
                        <ellipse cx="80" cy="85" rx="8" ry="12" fill="#FFD700" opacity="0.9"/>
                        <ellipse cx="120" cy="85" rx="8" ry="12" fill="#FFD700" opacity="0.9"/>
                        <ellipse cx="80" cy="87" rx="4" ry="8" fill="#000"/>
                        <ellipse cx="120" cy="87" rx="4" ry="8" fill="#000"/>
                        
                        <!-- Crown Pattern in Spots -->
                        <!-- Center crown spot -->
                        <circle cx="100" cy="55" r="6" fill="url(#goldAccent)" opacity="0.8"/>
                        <!-- Crown side spots -->
                        <circle cx="85" cy="52" r="4" fill="#333" opacity="0.6"/>
                        <circle cx="115" cy="52" r="4" fill="#333" opacity="0.6"/>
                        <circle cx="72" cy="55" r="3" fill="#333" opacity="0.5"/>
                        <circle cx="128" cy="55" r="3" fill="#333" opacity="0.5"/>
                        
                        <!-- Regular Jaguar Spots -->
                        <circle cx="65" cy="75" r="4" fill="#222" opacity="0.6"/>
                        <circle cx="135" cy="75" r="4" fill="#222" opacity="0.6"/>
                        <circle cx="70" cy="95" r="5" fill="#222" opacity="0.5"/>
                        <circle cx="130" cy="95" r="5" fill="#222" opacity="0.5"/>
                        <circle cx="85" cy="105" r="4" fill="#222" opacity="0.4"/>
                        <circle cx="115" cy="105" r="4" fill="#222" opacity="0.4"/>
                        
                        <!-- Nose -->
                        <path d="M100 100 L95 108 L100 110 L105 108 Z" fill="#FFD700" opacity="0.3"/>
                        
                        <!-- Mouth -->
                        <path d="M100 110 Q85 115 80 108" fill="none" stroke="#333" stroke-width="1.5" opacity="0.5"/>
                        <path d="M100 110 Q115 115 120 108" fill="none" stroke="#333" stroke-width="1.5" opacity="0.5"/>
                        
                        <!-- Ears -->
                        <path d="M60 65 L55 45 L70 55 Z" fill="#0a0a0a" stroke="url(#silverSheen)" stroke-width="1"/>
                        <path d="M140 65 L145 45 L130 55 Z" fill="#0a0a0a" stroke="url(#silverSheen)" stroke-width="1"/>
                    </svg>
                </div>

                <!-- Dynamic Greeting -->
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 id="greeting" style="font-size: 24px; font-weight: 200; color: #fff; letter-spacing: 2px;">GOOD MORNING ANSHUMAN</h2>
                </div>

                <!-- Quote of the Day -->
                <div class="card" style="margin-bottom: 30px; text-align: center; position: relative;">
                    <div id="quoteText" style="font-size: 16px; line-height: 1.6; color: #e0e0e0; margin-bottom: 15px; font-style: italic;">
                        "Loading wisdom..."
                    </div>
                    <div id="quoteAuthor" style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 20px;">
                        
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="dislikeQuote()" class="btn" style="padding: 8px 16px; background: rgba(255, 51, 102, 0.1); color: #ff3366; border-color: rgba(255, 51, 102, 0.3);">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"/>
                            </svg>
                        </button>
                        <button onclick="likeQuote()" class="btn" style="padding: 8px 16px; background: rgba(0, 255, 136, 0.1); color: #00ff88; border-color: rgba(0, 255, 136, 0.3);">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Main Navigation -->
                <div style="display: grid; gap: 15px;">
                    <button class="btn btn-primary btn-full" onclick="switchToSection('approaches')" style="padding: 20px; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                        </svg>
                        COLD APPROACH TRACKING
                    </button>
                    <button class="btn btn-primary btn-full" onclick="switchToSection('dates')" style="padding: 20px; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                        DATE SCHEDULING
                    </button>
                    <button class="btn btn-primary btn-full" onclick="switchToSection('wms')" style="padding: 20px; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                        WOMAN MANAGEMENT SYSTEM
                    </button>
                </div>
            </div>

            <!-- Section Selector (Hidden on home screen, shown in other sections) -->
            <div class="section-selector" id="sectionSelector" style="display: none;">
                <button class="section-btn" onclick="switchSection('approaches')">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                    </svg>
                    APPROACH
                </button>
                <button class="section-btn" onclick="switchSection('dates')">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                    </svg>
                    DATES
                </button>
                <button class="section-btn" onclick="switchSection('wms')">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                    WMS
                </button>
            </div>

            <!-- Cold Approach Section -->
            <div id="approachesSection" class="section">
                <!-- Score Card -->
                <div class="card">
                    <div style="display: flex; justify-content: space-around; margin-bottom: 20px;">
                        <div style="text-align: center;">
                            <div style="font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px;">This Week</div>
                            <div style="font-size: 36px; font-weight: 200; color: #fff;" id="weekScore">0</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px;">Target</div>
                            <div style="font-size: 36px; font-weight: 200; color: #fff;">5</div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%" data-percentage="0%"></div>
                    </div>
                </div>

                <button class="btn btn-primary btn-full" onclick="showApproachForm()" style="margin-bottom: 20px;">
                    + NEW APPROACH
                </button>

                <div class="card">
                    <h3 style="margin-bottom: 15px;">RECENT APPROACHES</h3>
                    <div id="approachList"></div>
                </div>
            </div>

            <!-- Date Scheduling Section -->
            <div id="datesSection" class="section">
                <button class="btn btn-primary btn-full" onclick="showDateForm()" style="margin-bottom: 20px;">
                    + SCHEDULE DATE
                </button>

                <div class="card">
                    <h3 style="margin-bottom: 15px;">UPCOMING DATES</h3>
                    <div id="upcomingDates"></div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3 style="margin-bottom: 15px;">PAST DATES</h3>
                    <div id="pastDates"></div>
                </div>
            </div>

            <!-- Woman Management System Section -->
            <div id="wmsSection" class="section">
                <button class="btn btn-primary btn-full" onclick="showWomanForm()" style="margin-bottom: 20px;">
                    + ADD WOMAN
                </button>

                <div class="filter-bar">
                    <input type="text" class="search-input" placeholder="Search by name..." id="wmsSearch" oninput="filterWomen()">
                    <div class="filter-chips">
                        <div class="filter-chip" onclick="toggleFilter(this, 'current')">Current</div>
                        <div class="filter-chip" onclick="toggleFilter(this, 'in-process')">In Process</div>
                        <div class="filter-chip" onclick="toggleFilter(this, 'passive')">Passive</div>
                        <div class="filter-chip" onclick="toggleFilter(this, 'archived')">Archived</div>
                    </div>
                </div>

                <div class="woman-grid" id="womanGrid"></div>
            </div>

            <button class="sign-out" onclick="signOut()">Sign Out</button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav" id="bottomNav" style="display: none;">
        <div class="nav-item active" onclick="goHome()">
            <div class="nav-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
            </div>
            <div class="nav-label">Home</div>
        </div>
        <div class="nav-item" onclick="switchTab('dashboard')">
            <div class="nav-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
            </div>
            <div class="nav-label">Dashboard</div>
        </div>
        <div class="nav-item" onclick="switchTab('history')">
            <div class="nav-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
                </svg>
            </div>
            <div class="nav-label">History</div>
        </div>
        <div class="nav-item" onclick="switchTab('stats')">
            <div class="nav-icon">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                </svg>
            </div>
            <div class="nav-label">Stats</div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Approach Form Modal -->
    <div id="approachModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Log Approach</h2>
                <button class="close-btn" onclick="closeModal('approachModal')">Ã—</button>
            </div>

            <div class="form-group">
                <label>Date & Time</label>
                <input type="datetime-local" id="approachDate">
            </div>

            <div class="form-group">
                <label>Location/Setting</label>
                <input type="text" id="location" placeholder="e.g., Coffee shop, Street, Gym">
            </div>

            <div class="form-group">
                <label>Link to Woman (Optional)</label>
                <select id="approachWomanLink">
                    <option value="">None</option>
                </select>
            </div>

            <div class="form-group">
                <label>Effort Level</label>
                <div class="effort-options">
                    <div class="effort-btn" onclick="selectEffort(this, 'low', 0.5)">
                        Low<br><small>+0.5</small>
                    </div>
                    <div class="effort-btn" onclick="selectEffort(this, 'medium', 1)">
                        Medium<br><small>+1</small>
                    </div>
                    <div class="effort-btn selected" onclick="selectEffort(this, 'high', 1.5)">
                        High<br><small>+1.5</small>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>What did I do well?</label>
                <textarea id="goodFeedback" placeholder="At least one thing you did well..."></textarea>
            </div>

            <div class="form-group">
                <label>What could I improve?</label>
                <textarea id="badFeedback" placeholder="At least one area for improvement..."></textarea>
            </div>

            <div class="form-group">
                <label>Outcome</label>
                <select id="outcome">
                    <option value="">Select outcome...</option>
                    <option value="number">Got number</option>
                    <option value="social">Good conversation</option>
                    <option value="date">Instant date</option>
                    <option value="rejection">Polite rejection</option>
                    <option value="ignored">Ignored</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label>Notes</label>
                <textarea id="notes" placeholder="Any additional thoughts..."></textarea>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-success" onclick="saveApproach()" style="flex: 1;">Save</button>
                <button class="btn btn-danger" onclick="closeModal('approachModal')" style="flex: 1;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Date Form Modal -->
    <div id="dateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Schedule Date</h2>
                <button class="close-btn" onclick="closeModal('dateModal')">Ã—</button>
            </div>

            <div class="form-group">
                <label>Woman</label>
                <select id="dateWoman">
                    <option value="">Select woman...</option>
                </select>
            </div>

            <div class="form-group">
                <label>Date & Time</label>
                <input type="datetime-local" id="dateTime">
            </div>

            <div class="form-group">
                <label>Venue</label>
                <input type="text" id="dateVenue" placeholder="e.g., Italian restaurant, Coffee shop">
            </div>

            <div class="form-group">
                <label>Notes</label>
                <textarea id="dateNotes" placeholder="Plans, things to remember, etc..."></textarea>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-success" onclick="saveDate()" style="flex: 1;">Save</button>
                <button class="btn btn-danger" onclick="closeModal('dateModal')" style="flex: 1;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Woman Form Modal -->
    <div id="womanModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Woman Profile</h2>
                <button class="close-btn" onclick="closeModal('womanModal')">Ã—</button>
            </div>

            <div class="form-group">
                <label>Name</label>
                <input type="text" id="womanName" placeholder="Her name">
            </div>

            <div class="form-group">
                <label>Status</label>
                <select id="womanStatus">
                    <option value="current">Current</option>
                    <option value="in-process">In Process</option>
                    <option value="passive">Passive</option>
                    <option value="archived">Archived</option>
                </select>
            </div>

            <div class="form-group">
                <label>Photos (up to 5)</label>
                <div class="photo-upload-area">
                    <input type="file" id="photoUpload" accept="image/*" multiple onchange="handlePhotoUpload(event)" style="display: none;">
                    <button onclick="document.getElementById('photoUpload').click()" class="btn btn-primary btn-full">
                        Select Photos
                    </button>
                    <p style="font-size: 12px; color: #999; margin-top: 10px; text-align: center;">
                        Click the Ã— on any photo to remove it
                    </p>
                    <div class="photo-preview-container" id="photoPreview"></div>
                </div>
            </div>

            <!-- Rating Sections -->
            <div class="rating-section">
                <h3>Personality</h3>
                <div class="rating-item">
                    <label>Funny</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('funny', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('funny', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('funny', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Sweet & Submissive</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('sweet', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('sweet', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('sweet', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Low Maintenance</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('lowMaintenance', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('lowMaintenance', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('lowMaintenance', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Loyal</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('loyal', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('loyal', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('loyal', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Intelligence</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('intelligence', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('intelligence', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('intelligence', 'high', this)">High</button>
                    </div>
                </div>
            </div>

            <div class="rating-section">
                <h3>Body</h3>
                <div class="rating-item">
                    <label>Tits</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('tits', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('tits', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('tits', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Ass</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('ass', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('ass', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('ass', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Height</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('height', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('height', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('height', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Face</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('face', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('face', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('face', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Hair</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('hair', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('hair', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('hair', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Nails</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('nails', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('nails', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('nails', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Tummy</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('tummy', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('tummy', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('tummy', 'high', this)">High</button>
                    </div>
                </div>
            </div>

            <div class="rating-section">
                <h3>Fashion and Class</h3>
                <div class="rating-item">
                    <label>Clothing</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('clothing', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('clothing', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('clothing', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Money</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('money', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('money', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('money', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Classy</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('classy', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('classy', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('classy', 'high', this)">High</button>
                    </div>
                </div>
            </div>

            <div class="rating-section">
                <h3>Overall</h3>
                <div class="rating-item">
                    <label>Adds to my status</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('status', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('status', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('status', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Do I think she's hot</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('hot', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('hot', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('hot', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Do I like her</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('like', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('like', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('like', 'high', this)">High</button>
                    </div>
                </div>
                <div class="rating-item">
                    <label>Can I see long term</label>
                    <div class="rating-buttons">
                        <button class="rating-btn" onclick="setRating('longTerm', 'low', this)">Low</button>
                        <button class="rating-btn" onclick="setRating('longTerm', 'medium', this)">Med</button>
                        <button class="rating-btn" onclick="setRating('longTerm', 'high', this)">High</button>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Other Notes</label>
                <textarea id="womanNotes" placeholder="Any other thoughts..." rows="4"></textarea>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-success" onclick="saveWoman()" style="flex: 1;">Save</button>
                <button class="btn btn-danger" onclick="closeModal('womanModal')" style="flex: 1;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getAuth, 
            signInWithPopup, 
            signInAnonymously as firebaseSignInAnonymously,
            GoogleAuthProvider,
            onAuthStateChanged,
            signOut as firebaseSignOut
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { 
            getDatabase, 
            ref, 
            set, 
            get, 
            onValue, 
            push,
            remove,
            update
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCaQwlzC_QhVJA_NhgJHrQFR-8f6aYyiIA",
            authDomain: "approach-tracker.firebaseapp.com",
            databaseURL: "https://approach-tracker-default-rtdb.firebaseio.com",
            projectId: "approach-tracker",
            storageBucket: "approach-tracker.firebasestorage.app",
            messagingSenderId: "175879600021",
            appId: "1:175879600021:web:2c7b64f9a4eb32f473e89c"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);
        const googleProvider = new GoogleAuthProvider();

        // Global state
        window.currentUser = null;
        window.approaches = [];
        window.women = [];
        window.dates = [];
        window.selectedEffort = { level: 'high', score: 1.5 };
        window.currentRatings = {};
        window.currentPhotos = [];
        window.editingId = null;
        window.activeFilters = [];

        // Quote Library
        window.quoteLibrary = [
            // Success & Ambition
            { text: "The man who moves a mountain begins by carrying away small stones.", author: "Confucius" },
            { text: "Discipline is choosing between what you want now and what you want most.", author: "Abraham Lincoln" },
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Success is walking from failure to failure with no loss of enthusiasm.", author: "Winston Churchill" },
            { text: "Your limitation is only your imagination.", author: "Unknown" },
            { text: "Great things never come from comfort zones.", author: "Unknown" },
            { text: "Don't wait for opportunity. Create it.", author: "Unknown" },
            { text: "The harder you work for something, the greater you'll feel when you achieve it.", author: "Unknown" },
            
            // Masculinity & Strength
            { text: "The superior man is modest in his speech but exceeds in his actions.", author: "Confucius" },
            { text: "A man who conquers himself is greater than one who conquers a thousand men in battle.", author: "Buddha" },
            { text: "The successful warrior is the average man with laser-like focus.", author: "Bruce Lee" },
            { text: "Do not pray for an easy life, pray for the strength to endure a difficult one.", author: "Bruce Lee" },
            { text: "He who is not courageous enough to take risks will accomplish nothing in life.", author: "Muhammad Ali" },
            { text: "A lion doesn't concern himself with the opinions of sheep.", author: "Unknown" },
            { text: "The wolf on the hill is never as hungry as the wolf climbing the hill.", author: "Unknown" },
            { text: "Smooth seas do not make skillful sailors.", author: "African Proverb" },
            
            // Dating & Attraction
            { text: "Become the man you'd want your daughter to marry.", author: "Unknown" },
            { text: "Your value doesn't decrease based on someone's inability to see your worth.", author: "Unknown" },
            { text: "Be the type of energy that no matter where you go, you always add value.", author: "Unknown" },
            { text: "Confidence is not 'they will like me'. Confidence is 'I'll be fine if they don't'.", author: "Unknown" },
            { text: "The man who does not value himself, cannot value anything or anyone.", author: "Ayn Rand" },
            { text: "Make yourself so interesting that you become your own entertainment.", author: "Unknown" },
            { text: "Attraction isn't a choice. Excellence is.", author: "Unknown" },
            { text: "The quality of your life is the quality of your relationships.", author: "Tony Robbins" },
            
            // Stoic Philosophy
            { text: "You have power over your mind, not outside events. Realize this, and you will find strength.", author: "Marcus Aurelius" },
            { text: "The best revenge is massive success.", author: "Frank Sinatra" },
            { text: "What we think, we become.", author: "Buddha" },
            { text: "The obstacle is the way.", author: "Marcus Aurelius" },
            { text: "Be yourself; everyone else is already taken.", author: "Oscar Wilde" },
            { text: "How long are you going to wait before you demand the best for yourself?", author: "Epictetus" },
            { text: "It is not death that a man should fear, but never beginning to live.", author: "Marcus Aurelius" },
            { text: "First say to yourself what you would be; and then do what you have to do.", author: "Epictetus" },
            
            // Power & Influence
            { text: "Everyone sees what you appear to be, few experience what you really are.", author: "NiccolÃ² Machiavelli" },
            { text: "Power is not revealed by striking hard or often, but by striking true.", author: "HonorÃ© de Balzac" },
            { text: "The lion cannot protect himself from traps, and the fox cannot defend himself from wolves.", author: "NiccolÃ² Machiavelli" },
            { text: "Mastering others is strength. Mastering yourself is true power.", author: "Lao Tzu" },
            { text: "Never interrupt your enemy when he is making a mistake.", author: "Napoleon Bonaparte" },
            { text: "In the midst of chaos, there is also opportunity.", author: "Sun Tzu" },
            { text: "The supreme art of war is to subdue the enemy without fighting.", author: "Sun Tzu" },
            { text: "I would rather die on my feet than live on my knees.", author: "Emiliano Zapata" },
            
            // Modern Success
            { text: "Work in silence, let success make the noise.", author: "Unknown" },
            { text: "Obsessed is a word the lazy use to describe the dedicated.", author: "Unknown" },
            { text: "You didn't come this far to only come this far.", author: "Unknown" },
            { text: "Be so good they can't ignore you.", author: "Steve Martin" },
            { text: "Success is the sum of small efforts repeated day in and day out.", author: "Robert Collier" },
            { text: "The man at the top of the mountain didn't fall there.", author: "Vince Lombardi" },
            { text: "Winners focus on winning. Losers focus on winners.", author: "Unknown" },
            { text: "Your network is your net worth.", author: "Porter Gale" },
            
            // Self-Improvement
            { text: "Every morning you have two choices: continue to sleep with your dreams, or wake up and chase them.", author: "Unknown" },
            { text: "The only person you should try to be better than is who you were yesterday.", author: "Unknown" },
            { text: "Don't decrease the goal. Increase the effort.", author: "Unknown" },
            { text: "If you want something you've never had, you must do something you've never done.", author: "Thomas Jefferson" },
            { text: "The pain of discipline weighs ounces while the pain of regret weighs tons.", author: "Jim Rohn" },
            { text: "One day or day one. You decide.", author: "Unknown" },
            { text: "The comfort zone is a beautiful place, but nothing ever grows there.", author: "Unknown" },
            { text: "You are confined only by the walls you build yourself.", author: "Unknown" }
        ];

        // Quote management
        window.dislikedQuotes = JSON.parse(localStorage.getItem('dislikedQuotes') || '[]');
        window.likedQuotes = JSON.parse(localStorage.getItem('likedQuotes') || '[]');
        window.currentQuoteIndex = null;

        function getFilteredQuotes() {
            return window.quoteLibrary.filter((quote, index) => 
                !window.dislikedQuotes.includes(index)
            );
        }

        function selectDailyQuote() {
            const availableQuotes = getFilteredQuotes();
            if (availableQuotes.length === 0) {
                // Reset if all quotes are disliked
                window.dislikedQuotes = [];
                localStorage.setItem('dislikedQuotes', '[]');
                return selectDailyQuote();
            }

            // Weight liked quotes higher
            let quotePool = [];
            availableQuotes.forEach(quote => {
                const originalIndex = window.quoteLibrary.indexOf(quote);
                quotePool.push(originalIndex);
                if (window.likedQuotes.includes(originalIndex)) {
                    // Add liked quotes twice more to the pool (3x chance)
                    quotePool.push(originalIndex, originalIndex);
                }
            });

            // Select random from weighted pool
            const randomIndex = Math.floor(Math.random() * quotePool.length);
            window.currentQuoteIndex = quotePool[randomIndex];
            
            const selectedQuote = window.quoteLibrary[window.currentQuoteIndex];
            document.getElementById('quoteText').textContent = `"${selectedQuote.text}"`;
            document.getElementById('quoteAuthor').textContent = `â€” ${selectedQuote.author}`;
        }

        window.likeQuote = function() {
            if (window.currentQuoteIndex !== null) {
                if (!window.likedQuotes.includes(window.currentQuoteIndex)) {
                    window.likedQuotes.push(window.currentQuoteIndex);
                    localStorage.setItem('likedQuotes', JSON.stringify(window.likedQuotes));
                }
                // Show next quote
                selectDailyQuote();
            }
        }

        window.dislikeQuote = function() {
            if (window.currentQuoteIndex !== null) {
                if (!window.dislikedQuotes.includes(window.currentQuoteIndex)) {
                    window.dislikedQuotes.push(window.currentQuoteIndex);
                    localStorage.setItem('dislikedQuotes', JSON.stringify(window.dislikedQuotes));
                }
                // Remove from liked if it was liked
                const likedIndex = window.likedQuotes.indexOf(window.currentQuoteIndex);
                if (likedIndex > -1) {
                    window.likedQuotes.splice(likedIndex, 1);
                    localStorage.setItem('likedQuotes', JSON.stringify(window.likedQuotes));
                }
                // Show next quote
                selectDailyQuote();
            }
        }

        function updateGreeting() {
            const hour = new Date().getHours();
            let greeting;
            
            if (hour < 5) {
                greeting = "LATE NIGHT HUSTLE, ANSHUMAN";
            } else if (hour < 12) {
                greeting = "GOOD MORNING ANSHUMAN";
            } else if (hour < 17) {
                greeting = "GOOD AFTERNOON ANSHUMAN";
            } else if (hour < 21) {
                greeting = "GOOD EVENING ANSHUMAN";
            } else {
                greeting = "GOOD NIGHT ANSHUMAN";
            }
            
            document.getElementById('greeting').textContent = greeting;
        }

        // New navigation function for home screen
        window.switchToSection = function(section) {
            document.getElementById('homeScreen').style.display = 'none';
            document.getElementById('sectionSelector').style.display = 'grid';
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            
            // Show selected section
            document.getElementById(`${section}Section`).classList.add('active');
            
            // Update section selector buttons
            document.querySelectorAll('.section-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.section-btn[onclick*="${section}"]`).classList.add('active');
        }

        // Auth functions
        window.signInWithGoogle = async () => {
            try {
                updateSyncStatus('syncing');
                const result = await signInWithPopup(auth, googleProvider);
                console.log('Signed in with Google:', result.user.email);
            } catch (error) {
                console.error('Error signing in with Google:', error);
                alert('Error signing in. Please try again.');
                updateSyncStatus('offline');
            }
        };

        window.signInAnonymously = async () => {
            try {
                updateSyncStatus('syncing');
                const result = await firebaseSignInAnonymously(auth);
                console.log('Signed in anonymously');
            } catch (error) {
                console.error('Error signing in anonymously:', error);
                alert('Error signing in. Please try again.');
                updateSyncStatus('offline');
            }
        };

        window.signOut = async () => {
            if (confirm('Are you sure you want to sign out?')) {
                try {
                    await firebaseSignOut(auth);
                    console.log('Signed out');
                } catch (error) {
                    console.error('Error signing out:', error);
                }
            }
        };

        // Monitor auth state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.currentUser = user;
                document.getElementById('loadingScreen').style.display = 'none';
                document.getElementById('authScreen').style.display = 'none';
                document.getElementById('appContent').style.display = 'block';
                document.getElementById('bottomNav').style.display = 'flex';
                
                // Show user info
                const userInfo = document.getElementById('userInfo');
                if (user.email) {
                    userInfo.textContent = `${user.email}`;
                } else {
                    userInfo.textContent = 'Anonymous User';
                }
                
                // Initialize greeting and quote
                updateGreeting();
                selectDailyQuote();
                
                // Update greeting every minute
                setInterval(updateGreeting, 60000);
                
                // Set up real-time sync
                setupRealtimeSync(user.uid);
                
                // Initialize UI
                const now = new Date();
                document.getElementById('approachDate').value = now.toISOString().slice(0, 16);
                document.getElementById('dateTime').value = now.toISOString().slice(0, 16);
                
            } else {
                window.currentUser = null;
                document.getElementById('loadingScreen').style.display = 'none';
                document.getElementById('authScreen').style.display = 'block';
                document.getElementById('appContent').style.display = 'none';
                document.getElementById('bottomNav').style.display = 'none';
            }
        });

        // Navigation functions
        window.goHome = function() {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            
            // Show home screen
            document.getElementById('homeScreen').classList.add('active');
            document.getElementById('sectionSelector').style.display = 'none';
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            if (event && event.target) {
                event.target.closest('.nav-item').classList.add('active');
            }
            
            // Update greeting and select new quote
            updateGreeting();
            selectDailyQuote();
        }

        // Set up real-time sync with Firebase
        function setupRealtimeSync(userId) {
            const approachesRef = ref(database, `users/${userId}/approaches`);
            const womenRef = ref(database, `users/${userId}/women`);
            const datesRef = ref(database, `users/${userId}/dates`);
            
            // Listen for approaches changes
            onValue(approachesRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    window.approaches = Object.entries(data)
                        .map(([key, value]) => ({ ...value, firebaseKey: key }))
                        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                } else {
                    window.approaches = [];
                }
                updateApproachesUI();
                updateSyncStatus('synced');
            });

            // Listen for women changes
            onValue(womenRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    window.women = Object.entries(data)
                        .map(([key, value]) => ({ ...value, firebaseKey: key }));
                } else {
                    window.women = [];
                }
                updateWomenUI();
                updateDropdowns();
                updateSyncStatus('synced');
            });

            // Listen for dates changes
            onValue(datesRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    window.dates = Object.entries(data)
                        .map(([key, value]) => ({ ...value, firebaseKey: key }))
                        .sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime));
                } else {
                    window.dates = [];
                }
                updateDatesUI();
                updateSyncStatus('synced');
            });
        }

        // Section switching
        window.switchSection = function(section) {
            // If switching from home screen, show the section selector
            if (document.getElementById('homeScreen').classList.contains('active')) {
                document.getElementById('homeScreen').classList.remove('active');
                document.getElementById('sectionSelector').style.display = 'grid';
            }
            
            // Update buttons
            document.querySelectorAll('.section-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Update sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(`${section}Section`).classList.add('active');
        }

        // Modal functions
        window.showApproachForm = function(approachId = null) {
            window.editingId = approachId;
            
            if (approachId) {
                const approach = window.approaches.find(a => a.firebaseKey === approachId);
                if (approach) {
                    document.getElementById('approachDate').value = approach.date;
                    document.getElementById('location').value = approach.location;
                    document.getElementById('approachWomanLink').value = approach.womanId || '';
                    document.getElementById('goodFeedback').value = approach.goodFeedback;
                    document.getElementById('badFeedback').value = approach.badFeedback;
                    document.getElementById('outcome').value = approach.outcome || '';
                    document.getElementById('notes').value = approach.notes || '';
                    window.selectedEffort = { level: approach.effortLevel, score: approach.effortScore };
                    
                    // Update effort buttons
                    document.querySelectorAll('.effort-btn').forEach(btn => {
                        btn.classList.remove('selected');
                        if (btn.textContent.toLowerCase().includes(approach.effortLevel)) {
                            btn.classList.add('selected');
                        }
                    });
                }
            } else {
                // Reset form for new entry
                document.getElementById('approachDate').value = new Date().toISOString().slice(0, 16);
                document.getElementById('location').value = '';
                document.getElementById('approachWomanLink').value = '';
                document.getElementById('goodFeedback').value = '';
                document.getElementById('badFeedback').value = '';
                document.getElementById('outcome').value = '';
                document.getElementById('notes').value = '';
            }
            
            document.getElementById('approachModal').classList.add('active');
        }

        window.showDateForm = function(dateId = null) {
            window.editingId = dateId;
            
            if (dateId) {
                const date = window.dates.find(d => d.firebaseKey === dateId);
                if (date) {
                    document.getElementById('dateWoman').value = date.womanId;
                    document.getElementById('dateTime').value = date.dateTime;
                    document.getElementById('dateVenue').value = date.venue;
                    document.getElementById('dateNotes').value = date.notes || '';
                }
            } else {
                document.getElementById('dateWoman').value = '';
                document.getElementById('dateTime').value = new Date().toISOString().slice(0, 16);
                document.getElementById('dateVenue').value = '';
                document.getElementById('dateNotes').value = '';
            }
            
            document.getElementById('dateModal').classList.add('active');
        }

        window.showWomanForm = function(womanId = null) {
            window.editingId = womanId;
            window.currentRatings = {};
            window.currentPhotos = [];
            
            if (womanId) {
                const woman = window.women.find(w => w.firebaseKey === womanId);
                if (woman) {
                    document.getElementById('womanName').value = woman.name;
                    document.getElementById('womanStatus').value = woman.status;
                    document.getElementById('womanNotes').value = woman.notes || '';
                    window.currentRatings = woman.ratings || {};
                    window.currentPhotos = woman.photos || [];
                    
                    // Update rating buttons
                    Object.entries(woman.ratings || {}).forEach(([key, value]) => {
                        const btns = document.querySelectorAll(`[onclick*="setRating('${key}',"]`);
                        btns.forEach(btn => {
                            btn.classList.remove('selected');
                            if (btn.onclick.toString().includes(value)) {
                                btn.classList.add('selected');
                            }
                        });
                    });
                    
                    // Update photo preview with delete buttons
                    updatePhotoPreview();
                }
            } else {
                document.getElementById('womanName').value = '';
                document.getElementById('womanStatus').value = 'in-process';
                document.getElementById('womanNotes').value = '';
                document.getElementById('photoPreview').innerHTML = '';
                document.querySelectorAll('.rating-btn').forEach(btn => btn.classList.remove('selected'));
            }
            
            document.getElementById('womanModal').classList.add('active');
        }

        window.closeModal = function(modalId) {
            document.getElementById(modalId).classList.remove('active');
            window.editingId = null;
        }

        // Save functions
        window.saveApproach = async function() {
            if (!window.currentUser) {
                alert('Please sign in first');
                return;
            }
            
            const date = document.getElementById('approachDate').value;
            const location = document.getElementById('location').value;
            const womanId = document.getElementById('approachWomanLink').value;
            const goodFeedback = document.getElementById('goodFeedback').value;
            const badFeedback = document.getElementById('badFeedback').value;
            const outcome = document.getElementById('outcome').value;
            const notes = document.getElementById('notes').value;
            
            if (!date || !location || !goodFeedback || !badFeedback) {
                alert('Please fill in all required fields');
                return;
            }
            
            updateSyncStatus('syncing');
            
            const approach = {
                date,
                location,
                womanId,
                effortLevel: window.selectedEffort.level,
                effortScore: window.selectedEffort.score,
                goodFeedback,
                badFeedback,
                outcome,
                notes,
                timestamp: new Date().toISOString()
            };
            
            try {
                const approachesRef = ref(database, `users/${window.currentUser.uid}/approaches`);
                
                if (window.editingId) {
                    await update(ref(database, `users/${window.currentUser.uid}/approaches/${window.editingId}`), approach);
                } else {
                    await push(approachesRef, approach);
                }
                
                closeModal('approachModal');
                updateSyncStatus('synced');
            } catch (error) {
                console.error('Error saving approach:', error);
                alert('Error saving. Please try again.');
                updateSyncStatus('offline');
            }
        }

        window.saveDate = async function() {
            if (!window.currentUser) {
                alert('Please sign in first');
                return;
            }
            
            const womanId = document.getElementById('dateWoman').value;
            const dateTime = document.getElementById('dateTime').value;
            const venue = document.getElementById('dateVenue').value;
            const notes = document.getElementById('dateNotes').value;
            
            if (!womanId || !dateTime || !venue) {
                alert('Please fill in all required fields');
                return;
            }
            
            updateSyncStatus('syncing');
            
            const dateObj = {
                womanId,
                dateTime,
                venue,
                notes,
                createdAt: new Date().toISOString()
            };
            
            try {
                const datesRef = ref(database, `users/${window.currentUser.uid}/dates`);
                
                if (window.editingId) {
                    await update(ref(database, `users/${window.currentUser.uid}/dates/${window.editingId}`), dateObj);
                } else {
                    await push(datesRef, dateObj);
                }
                
                closeModal('dateModal');
                updateSyncStatus('synced');
            } catch (error) {
                console.error('Error saving date:', error);
                alert('Error saving. Please try again.');
                updateSyncStatus('offline');
            }
        }

        window.saveWoman = async function() {
            if (!window.currentUser) {
                alert('Please sign in first');
                return;
            }

            const name = document.getElementById('womanName').value;
            const status = document.getElementById('womanStatus').value;
            const notes = document.getElementById('womanNotes').value;

            if (!name) {
                alert('Please enter a name');
                return;
            }

            updateSyncStatus('syncing');

            const score = calculateScore(window.currentRatings);

            const woman = {
                name,
                status,
                ratings: window.currentRatings,
                notes,
                photos: window.currentPhotos,
                score,
                updatedAt: new Date().toISOString()
            };

            try {
                const womenRef = ref(database, `users/${window.currentUser.uid}/women`);
                
                if (window.editingId) {
                    await update(ref(database, `users/${window.currentUser.uid}/women/${window.editingId}`), woman);
                } else {
                    woman.createdAt = new Date().toISOString();
                    await push(womenRef, woman);
                }

                closeModal('womanModal');
                updateSyncStatus('synced');
            } catch (error) {
                console.error('Error saving woman:', error);
                alert('Error saving. Please try again.');
                updateSyncStatus('offline');
            }
        }

        // Delete functions
        window.deleteApproach = async function(approachId) {
            if (!confirm('Are you sure you want to delete this approach?')) return;
            
            try {
                await remove(ref(database, `users/${window.currentUser.uid}/approaches/${approachId}`));
            } catch (error) {
                console.error('Error deleting approach:', error);
                alert('Error deleting. Please try again.');
            }
        }

        window.deleteDate = async function(dateId) {
            if (!confirm('Are you sure you want to delete this date?')) return;
            
            try {
                await remove(ref(database, `users/${window.currentUser.uid}/dates/${dateId}`));
            } catch (error) {
                console.error('Error deleting date:', error);
                alert('Error deleting. Please try again.');
            }
        }

        window.deleteWoman = async function(womanId) {
            if (!confirm('Are you sure you want to delete this profile?')) return;
            
            try {
                await remove(ref(database, `users/${window.currentUser.uid}/women/${womanId}`));
            } catch (error) {
                console.error('Error deleting woman:', error);
                alert('Error deleting. Please try again.');
            }
        }

        // UI Update functions
        function updateApproachesUI() {
            // Update week score
            const weekScore = getWeekScore();
            document.getElementById('weekScore').textContent = weekScore.toFixed(1);
            
            const percentage = Math.min((weekScore / 5) * 100, 100);
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.setAttribute('data-percentage', Math.round(percentage) + '%');
            
            // Update approach list
            const list = document.getElementById('approachList');
            if (window.approaches.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">â€”</div>No approaches yet</div>';
                return;
            }
            
            list.innerHTML = window.approaches.slice(0, 10).map(approach => {
                const date = new Date(approach.date);
                const woman = approach.womanId ? window.women.find(w => w.firebaseKey === approach.womanId) : null;
                
                return `
                    <div class="approach-item" onclick="showApproachForm('${approach.firebaseKey}')">
                        <div class="approach-header">
                            <span class="approach-date">${date.toLocaleDateString()}</span>
                            <span style="background: ${approach.effortLevel === 'high' ? 'rgba(0, 255, 136, 0.15)' : approach.effortLevel === 'medium' ? 'rgba(255, 170, 0, 0.15)' : 'rgba(255, 51, 102, 0.15)'}; color: ${approach.effortLevel === 'high' ? '#00ff88' : approach.effortLevel === 'medium' ? '#ffaa00' : '#ff3366'}; padding: 4px 10px; border-radius: 6px; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border: 1px solid ${approach.effortLevel === 'high' ? 'rgba(0, 255, 136, 0.3)' : approach.effortLevel === 'medium' ? 'rgba(255, 170, 0, 0.3)' : 'rgba(255, 51, 102, 0.3)'};">
                                ${approach.effortLevel} +${approach.effortScore}
                            </span>
                        </div>
                        <div style="color: #888; font-size: 13px; margin: 8px 0;">
                            <svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
                            </svg>
                            ${approach.location}
                        </div>
                        ${woman ? `<div style="color: #aaa; font-size: 13px;">
                            <svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 4px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                            </svg>
                            ${woman.name}
                        </div>` : ''}
                        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(255, 255, 255, 0.05);">
                            <div style="color: #00ff88; font-size: 13px;">âœ“ ${approach.goodFeedback}</div>
                            <div style="color: #ff3366; font-size: 13px; margin-top: 5px;">â†’ ${approach.badFeedback}</div>
                        </div>
                        <div class="edit-actions">
                            <button class="btn btn-warning" onclick="event.stopPropagation(); showApproachForm('${approach.firebaseKey}')" style="flex: 1;">Edit</button>
                            <button class="btn btn-danger" onclick="event.stopPropagation(); deleteApproach('${approach.firebaseKey}')" style="flex: 1;">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDatesUI() {
            const now = new Date();
            const upcoming = window.dates.filter(d => new Date(d.dateTime) >= now);
            const past = window.dates.filter(d => new Date(d.dateTime) < now);
            
            // Update upcoming dates
            const upcomingList = document.getElementById('upcomingDates');
            if (upcoming.length === 0) {
                upcomingList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ðŸ“…</div>No upcoming dates</div>';
            } else {
                upcomingList.innerHTML = upcoming.map(date => {
                    const woman = window.women.find(w => w.firebaseKey === date.womanId);
                    const dateObj = new Date(date.dateTime);
                    
                    return `
                        <div class="date-card">
                            <div class="date-header">
                                <span class="date-time">${dateObj.toLocaleDateString()} ${dateObj.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                                <span class="date-woman">${woman ? woman.name : 'Unknown'}</span>
                            </div>
                            <div style="color: #666; margin: 10px 0;">ðŸ“ ${date.venue}</div>
                            ${date.notes ? `<div style="color: #999; font-size: 14px;">ðŸ“ ${date.notes}</div>` : ''}
                            <div class="edit-actions">
                                <button class="btn btn-warning" onclick="showDateForm('${date.firebaseKey}')" style="flex: 1;">Edit</button>
                                <button class="btn btn-danger" onclick="deleteDate('${date.firebaseKey}')" style="flex: 1;">Delete</button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            // Update past dates
            const pastList = document.getElementById('pastDates');
            if (past.length === 0) {
                pastList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ðŸ“œ</div>No past dates</div>';
            } else {
                pastList.innerHTML = past.slice(0, 5).map(date => {
                    const woman = window.women.find(w => w.firebaseKey === date.womanId);
                    const dateObj = new Date(date.dateTime);
                    
                    return `
                        <div class="date-card" style="opacity: 0.8;">
                            <div class="date-header">
                                <span class="date-time">${dateObj.toLocaleDateString()}</span>
                                <span class="date-woman">${woman ? woman.name : 'Unknown'}</span>
                            </div>
                            <div style="color: #666;">ðŸ“ ${date.venue}</div>
                        </div>
                    `;
                }).join('');
            }
        }

        function updateWomenUI() {
            filterWomen();
        }

        window.filterWomen = function() {
            const searchTerm = document.getElementById('wmsSearch').value.toLowerCase();
            let filtered = window.women;
            
            // Apply status filters
            if (window.activeFilters.length > 0) {
                filtered = filtered.filter(w => window.activeFilters.includes(w.status));
            }
            
            // Apply search
            if (searchTerm) {
                filtered = filtered.filter(w => w.name.toLowerCase().includes(searchTerm));
            }
            
            // Sort by score
            filtered.sort((a, b) => b.score - a.score);
            
            const grid = document.getElementById('womanGrid');
            if (filtered.length === 0) {
                grid.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ðŸ‘©</div>No women found</div>';
                return;
            }
            
            grid.innerHTML = filtered.map(woman => {
                const photoHtml = woman.photos && woman.photos.length > 0 
                    ? `<img src="${woman.photos[0]}" style="width: 60px; height: 60px; border-radius: 10px; object-fit: cover; margin-right: 10px;">`
                    : '<div style="width: 60px; height: 60px; border-radius: 10px; background: #f0f0f0; margin-right: 10px; display: flex; align-items: center; justify-content: center;">ðŸ‘©</div>';
                
                return `
                    <div class="woman-card" onclick="showWomanForm('${woman.firebaseKey}')">
                        <div class="woman-score">${woman.score}</div>
                        <div style="display: flex; align-items: center;">
                            ${photoHtml}
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; margin-bottom: 5px;">${woman.name}</div>
                                <span class="woman-status-badge status-${woman.status.replace(' ', '-')}">${woman.status}</span>
                                <div style="margin-top: 10px;">
                                    ${createRatingDisplay(woman.ratings.hot)} Hot<br>
                                    ${createRatingDisplay(woman.ratings.like)} Like<br>
                                    ${createRatingDisplay(woman.ratings.longTerm)} LTR
                                </div>
                            </div>
                        </div>
                        <div class="edit-actions">
                            <button class="btn btn-warning" onclick="event.stopPropagation(); showWomanForm('${woman.firebaseKey}')" style="flex: 1;">Edit</button>
                            <button class="btn btn-danger" onclick="event.stopPropagation(); deleteWoman('${woman.firebaseKey}')" style="flex: 1;">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDropdowns() {
            // Update woman select in approach form
            const approachSelect = document.getElementById('approachWomanLink');
            approachSelect.innerHTML = '<option value="">None</option>' + 
                window.women.map(w => `<option value="${w.firebaseKey}">${w.name}</option>`).join('');
            
            // Update woman select in date form
            const dateSelect = document.getElementById('dateWoman');
            dateSelect.innerHTML = '<option value="">Select woman...</option>' + 
                window.women.filter(w => w.status === 'current' || w.status === 'in-process')
                    .map(w => `<option value="${w.firebaseKey}">${w.name}</option>`).join('');
        }

        // Helper functions
        window.selectEffort = function(btn, level, score) {
            document.querySelectorAll('.effort-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            window.selectedEffort = { level, score };
        }

        window.setRating = function(category, value, btn) {
            const parent = btn.parentElement;
            parent.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            window.currentRatings[category] = value;
        }

        window.handlePhotoUpload = function(event) {
            const files = event.target.files;
            if (files.length + window.currentPhotos.length > 5) {
                alert('Maximum 5 photos allowed');
                return;
            }

            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    window.currentPhotos.push(e.target.result);
                    updatePhotoPreview();
                };
                reader.readAsDataURL(file);
            });
            
            // Reset file input
            event.target.value = '';
        }

        window.deletePhoto = function(index) {
            window.currentPhotos.splice(index, 1);
            updatePhotoPreview();
        }

        function updatePhotoPreview() {
            const preview = document.getElementById('photoPreview');
            if (window.currentPhotos.length === 0) {
                preview.innerHTML = '';
                return;
            }
            
            preview.innerHTML = window.currentPhotos.map((photo, index) => `
                <div class="photo-preview-item">
                    <img src="${photo}" class="photo-preview">
                    <div class="photo-delete-btn" onclick="deletePhoto(${index})">Ã—</div>
                </div>
            `).join('');
        }

        window.toggleFilter = function(chip, status) {
            chip.classList.toggle('active');
            
            if (chip.classList.contains('active')) {
                window.activeFilters.push(status);
            } else {
                const index = window.activeFilters.indexOf(status);
                if (index > -1) {
                    window.activeFilters.splice(index, 1);
                }
            }
            
            filterWomen();
        }

        function createRatingDisplay(value) {
            const html = '<div class="rating-display">';
            
            if (value === 'low') {
                return html + '<span class="rating-dash low"></span><span class="rating-dash inactive"></span><span class="rating-dash inactive"></span></div>';
            } else if (value === 'medium') {
                return html + '<span class="rating-dash medium"></span><span class="rating-dash medium"></span><span class="rating-dash inactive"></span></div>';
            } else if (value === 'high') {
                return html + '<span class="rating-dash high"></span><span class="rating-dash high"></span><span class="rating-dash high"></span></div>';
            }
            
            return html + '<span class="rating-dash inactive"></span><span class="rating-dash inactive"></span><span class="rating-dash inactive"></span></div>';
        }

        function calculateScore(ratings) {
            const weights = {
                // Personality (25%)
                funny: 0.05,
                sweet: 0.05,
                lowMaintenance: 0.05,
                loyal: 0.05,
                intelligence: 0.05,
                // Body (30%)
                tits: 0.04,
                ass: 0.04,
                height: 0.04,
                face: 0.06,
                hair: 0.04,
                nails: 0.04,
                tummy: 0.04,
                // Fashion and Class (15%)
                clothing: 0.05,
                money: 0.05,
                classy: 0.05,
                // Overall (30%)
                status: 0.075,
                hot: 0.075,
                like: 0.075,
                longTerm: 0.075
            };

            const valueMap = { low: 3, medium: 6.5, high: 10 };
            
            let totalScore = 0;
            for (const [key, weight] of Object.entries(weights)) {
                const value = ratings[key] || 'medium';
                totalScore += valueMap[value] * weight;
            }

            return Math.round(totalScore * 10) / 10;
        }

        function getWeekScore() {
            const now = new Date();
            const monday = new Date(now);
            monday.setDate(now.getDate() - now.getDay() + 1);
            monday.setHours(0, 0, 0, 0);
            
            return window.approaches
                .filter(a => new Date(a.date) >= monday)
                .reduce((sum, a) => sum + a.effortScore, 0);
        }

        function updateSyncStatus(status) {
            const indicator = document.getElementById('syncIndicator');
            const text = document.getElementById('syncText');
            
            indicator.className = 'sync-indicator';
            
            switch(status) {
                case 'syncing':
                    indicator.classList.add('syncing');
                    text.textContent = 'Syncing...';
                    break;
                case 'synced':
                    text.textContent = 'Synced';
                    break;
                case 'offline':
                    indicator.classList.add('offline');
                    text.textContent = 'Offline';
                    break;
            }
        }

        window.switchTab = function(tab) {
            // This is for the bottom nav if you want to add more views later
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            event.target.closest('.nav-item').classList.add('active');
        }
    </script>
</body>
</html>